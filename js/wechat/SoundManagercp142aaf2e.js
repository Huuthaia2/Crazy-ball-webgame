var touch;!function(i){var o=function(){function o(){}return o.init=function(){if(Laya.Browser.onMiniGame){this._wx=Laya.Browser.window.wx;var i=this;this._wx.onShow(function(){i._bgPlaying&&i._bgAudio&&i._bgAudio.play()}),this._wx.onAudioInterruptionEnd(function(){i._bgPlaying&&i._bgAudio&&i._bgAudio.play()})}},o.destory=function(){this._wx=null},o._mp3ToOggUrl=function(i){var o=i;return o=o.replace("sounds","ogg"),o=o.replace(".mp3",".ogg")},o.playMusic=function(o,n,u){i.GameData.instance.isMusicOn&&(this._bgPlaying=!0,Laya.Browser.onMiniGame?this._bgUrl==o&&null!=this._bgAudio?(this._bgAudio.loop=n,this._bgAudio.volume=this._musicVolume,this._bgAudio.play()):(this._bgUrl=o,null!=this._bgAudio&&(this._bgAudio.destroy(),this._bgAudio=null),this._bgAudio=this._wx.createInnerAudioContext(),this._bgAudio.autoplay=!0,this._bgAudio.loop=n,this._bgAudio.volume=this._musicVolume,this._bgAudio.src=this._bgUrl):(Laya.SoundManager.stopMusic(),Laya.Render.isConchApp&&(o=this._mp3ToOggUrl(o)),Laya.SoundManager.playMusic(o,n?0:1,u)))},o.stopMusic=function(){Laya.Browser.onMiniGame?this._bgPlaying&&null!=this._bgAudio&&this._bgAudio.stop():Laya.SoundManager.stopMusic(),this._bgPlaying=!1},o.playSound=function(o){if(i.GameData.instance.isSoundOn)if(Laya.Browser.onMiniGame){var n=this._soundDic.get(o);null==n?((n=this._wx.createInnerAudioContext()).src=o,n.volume=this._soundVolume,n.play(),this._soundDic.set(o,n)):(n.seek(0),n.play())}else Laya.Render.isConchApp&&(o=this._mp3ToOggUrl(o)),Laya.SoundManager.playSound(o,1)},o.stopSound=function(i){if(Laya.Browser.onMiniGame){var o=this._soundDic.get(i);null!=o&&o.stop()}else Laya.SoundManager.stopSound(i),Laya.Render.isConchApp&&(i=this._mp3ToOggUrl(i)),Laya.SoundManager.stopSound(i)},o.setMusicVolume=function(i){Laya.Browser.onMiniGame&&(this._musicVolume=i,null!=this._bgAudio&&(this._bgAudio.volume=this._musicVolume))},o.setSoundVolume=function(i){var o=this;Laya.Browser.onMiniGame&&(this._soundVolume=i,this._soundDic.values.forEach(function(i){null!=i&&(i.volume=o._soundVolume)}))},o._wx=null,o._bgUrl="",o._bgComplete=null,o._bgAudio=null,o._bgPlaying=!1,o._soundDic=new Laya.Dictionary,o._musicVolume=1,o._soundVolume=1,o}();i.SoundManager=o}(touch||(touch={}));